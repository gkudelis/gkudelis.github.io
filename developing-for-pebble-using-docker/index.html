<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">

    <meta name="description" content="$title$">
    <meta name="majestic-site-verification" content="MJ12_b7bc5078-8873-4f6e-a61b-6a108fa148fe">

    <title>Blog and Notes of Giedrius Kudelis - 
    Developing for Pebble using Docker
</title>

    <!-- google web fonts -->
    <link href='https://fonts.googleapis.com/css?family=Josefin+Sans|Josefin+Slab:700' rel='stylesheet' type='text/css'>
    <!-- bootstrap -->
    <link href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.5/css/bootstrap.min.css" rel="stylesheet" integrity="sha256-MfvZlkHCEqatNoGiOXveE8FIwMzZg4W85qfrfIFBfYc= sha512-dTfge/zgoMYpP7QbHy4gWMEGsbsdZeCXz7irItjcC3sPUFtf0kuFbDz/ixG7ArTxmDjLXDmezHubeNikyKGVyQ==" crossorigin="anonymous">

    <!-- blog css -->
    <link rel="stylesheet" type="text/css" href="/css/default.css" />

    <!-- MathJax for nice formulas -->
    <script src='https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/latest.js?config=TeX-MML-AM_CHTML' async></script>

    <!-- google analytics -->
    <script>
        (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
        (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
        m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
        })(window,document,'script','//www.google-analytics.com/analytics.js','ga');
        ga('create', 'UA-71163958-1', 'auto');
        ga('send', 'pageview');
    </script>
</head>
<body>
    <div class="container">
        <div class="row">
            <div class="col-sm-4 col-sm-push-8">
                <a href="/"><h1>ekete.net</h1></a>

                <h3>Posts</h3>
                
                
                <ul class="post-list">
    
    <li>
        <span class="date">2019-10-26</span>
        <a href="https:&#x2F;&#x2F;ekete.net&#x2F;tail-call-optimisation-in-rust">Tail Call Optimisation in Rust</a>
    </li>
    
    <li>
        <span class="date">2019-05-09</span>
        <a href="https:&#x2F;&#x2F;ekete.net&#x2F;developing-for-pebble-using-docker">Developing for Pebble using Docker</a>
    </li>
    
    <li>
        <span class="date">2019-04-03</span>
        <a href="https:&#x2F;&#x2F;ekete.net&#x2F;tock-notifications-in-macos">Tock notifications in macOS</a>
    </li>
    
    <li>
        <span class="date">2019-02-27</span>
        <a href="https:&#x2F;&#x2F;ekete.net&#x2F;prime-number-generator">Lazy prime number generator in Python</a>
    </li>
    
    <li>
        <span class="date">2019-01-23</span>
        <a href="https:&#x2F;&#x2F;ekete.net&#x2F;entr-and-docker">Using entr and Docker together for development</a>
    </li>
    
    <li>
        <span class="date">2018-01-12</span>
        <a href="https:&#x2F;&#x2F;ekete.net&#x2F;astonhack-drumhub">AstonHack 2016 and DrumHub</a>
    </li>
    
    <li>
        <span class="date">2016-03-06</span>
        <a href="https:&#x2F;&#x2F;ekete.net&#x2F;dotfiles-in-git">Dotfiles in git</a>
    </li>
    
    <li>
        <span class="date">2015-12-08</span>
        <a href="https:&#x2F;&#x2F;ekete.net&#x2F;google-analytics">Getting Google Analytics</a>
    </li>
    
    <li>
        <span class="date">2015-12-03</span>
        <a href="https:&#x2F;&#x2F;ekete.net&#x2F;log-monitor">Log monitor using socat, rtail, nginx and supervisor</a>
    </li>
    
    <li>
        <span class="date">2015-11-03</span>
        <a href="https:&#x2F;&#x2F;ekete.net&#x2F;first-post">First post</a>
    </li>
    
</ul>

            </div>
            <div class="col-sm-8 col-sm-pull-4">
                
<div class="post">
    <h2>Developing for Pebble using Docker</h2>
    <p class="info">
        Published: 2019-05-09
        
        <br>Tags:
        
        <a href="https:&#x2F;&#x2F;ekete.net&#x2F;tags&#x2F;pebble&#x2F;">pebble</a>, 
        
        <a href="https:&#x2F;&#x2F;ekete.net&#x2F;tags&#x2F;docker&#x2F;">docker</a>
        
    </p>
    <p>A while ago I've come up with an idea for a watch. I thought it would benefit
from custom hardware, but what I really wanted to do is to quickly make a
working prototype and validate it. I looked around for hardware that would be
easy to code for and have all the functions I needed and quickly settled on the
Pebble watch. I found a couple (well, my very generous colleague donated them
to me) and started looking into how to get the toolchain working and put my
ideas to test.</p>
<h3 id="connecting-to-the-pebble">Connecting to the Pebble</h3>
<p>The main Pebble developer support site that comes up now is called <a href="https://developer.rebble.io/developer.pebble.com/index.html">Pebble
Developers</a>. You
can find a lot of helpful content there including <a href="https://developer.rebble.io/developer.pebble.com/sdk/install/index.html">how to get the SDK set up and
running</a>.
I tried following it on my Mac, but just couldn't get it working. Now, this is
exactly the kind of problem that Docker should be able to solve for me! I went
looking for an image that would have the Pebble SDK and found
<a href="https://hub.docker.com/r/andredumas/pebble-dev">andredumas/pebble-deb</a>.</p>
<p>The next thing I had to do was find a way to connect the Pebble to my Mac. I'd
assumed (wrongly) that the USB cable used to charge it would serve that
purpose, but the way to send programs to the watch is via Bluetooth. Reading
<a href="https://developer.rebble.io/developer.pebble.com/guides/tools-and-resources/developer-connection/index.html">the pebble cli tool documentation</a>
reveals that you need to either connect the Pebble directly to your Mac using
Bluetooth at which point it should appear as a device inside <code>/dev/</code> or you can
use Developer Connection available through the Android and iOS apps.</p>
<p>I personally would've preferred the former approach as I don't enjoy faffing
about with phone apps when developing, but since I couldn't get the SDK working
on my machine and the Docker is running in a VM (so I couldn't easily pass the
device into the container) I ended up going down the app route. Be warned - the
app is now discontinued and has been removed from the app store, so now you
have to download it from
<a href="https://play.google.com/store/apps/details?id=hu.czandor.pebblerebblehelper">APKMirror</a>.
Not sure what exactly you need to do to get it working with an iPhone, but if
you email me I'll be glad to add instructions for it to this article (or link
to yours).</p>
<p>Once you download the app to your phone you can install it from the APK file.
Launch the app, skip the login and you should have the app working. Next you
need to connect your pebble - click on the refresh icon in the top-right
corner, select the kind of Pebble you have and click on your device in the
list. You then have to go through the Bluetooth pairing procedure after which
the app might decide your watch needs an update. Once that's done and you have
connected your Pebble to the app you'll need to follow the directions for
<a href="https://developer.rebble.io/developer.pebble.com/guides/tools-and-resources/developer-connection/index.html">turning on Developer Connection</a>.</p>
<h3 id="building-and-installing-an-app">Building and installing an app</h3>
<p>Now that the Developer connection is on let's take an example app and install
it on the watch. A nice example is <a href="https://github.com/pebble-examples/simple-analog/">the simple-analog
watchface</a>. To clone it run</p>
<pre style="background-color:#002b36;">
<span style="color:#268bd2;">git</span><span style="color:#839496;"> clone https://github.com/pebble-examples/simple-analog.git
</span></pre>
<p>Enter the project folder, then build the app:</p>
<pre style="background-color:#002b36;">
<span style="color:#268bd2;">docker</span><span style="color:#839496;"> run</span><span style="color:#268bd2;"> --rm -it -v </span><span style="color:#859900;">$</span><span style="color:#268bd2;">PWD</span><span style="color:#839496;">:/pebble andredumas/pebble-dev build
</span></pre>
<p>If all went well (I get some Python errors, but the build still gets completed)
take the IP shown in Developer Connection and install the app on your Pebble:</p>
<pre style="background-color:#002b36;">
<span style="color:#268bd2;">docker</span><span style="color:#839496;"> run</span><span style="color:#268bd2;"> --rm -it -v </span><span style="color:#859900;">$</span><span style="color:#268bd2;">PWD</span><span style="color:#839496;">:/pebble andredumas/pebble-dev install</span><span style="color:#268bd2;"> --phone</span><span style="color:#657b83;">=</span><span style="color:#839496;">192.168.0.1
</span></pre>
<p>This will install the watchface on your Pebble and it should become the current
watchface. You can follow exactly the same process to build and install apps.</p>
<h3 id="alternative-connection-options">Alternative connection options</h3>
<p>I have to admit that I don't love having to download and install an app from a
mirror just to use the phone as a WiFi-Bluetooth bridge. I tried setting up
a Bluetooth serial connection to the Pebble from a Linux machine (hoping I can
use the <code>--device</code> option to <code>docker run</code> to pass it through to the container),
but it just kept disconnecting and I gave up. If you know how to get it
working - please let me know!</p>

</div>

            </div>
        </div>
    </div>

</body>
</html>
